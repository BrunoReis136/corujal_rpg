{% extends "base.html" %}

{% block title %}Aventuras - RPG{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold text-yellow-300 mb-4">📜 Aventuras Disponíveis</h2>

<a href="{{ url_for('nova_aventura') }}"
   class="inline-block bg-green-500 text-black font-bold px-4 py-2 rounded-lg mb-4 hover:bg-green-600">
   ➕ Criar Nova Aventura
</a>

<div class="space-y-4">
  {% for aventura in aventuras %}
    <div class="bg-gray-800 p-4 rounded-xl shadow-md">
      <h3 class="text-xl font-semibold text-yellow-400">{{ aventura.titulo }}</h3>
      <p class="text-gray-300">{{ aventura.descricao | truncate(30, True) }}</p>

      <div class="flex items-center gap-2 text-sm text-gray-400 mt-1">
        <span>Cenário: {{ aventura.cenario }}</span>
        <span>|</span>
        <span>
          Status:
          <span class="
            px-2 py-1 rounded text-xs font-bold
            {% if aventura.status == 'ativa' %} bg-green-600 text-white
            {% elif aventura.status == 'finalizada' %} bg-gray-600 text-white
            {% else %} bg-yellow-600 text-white
            {% endif %}
          ">
            {{ aventura.status }}
          </span>
        </span>
      </div>

      <p class="text-xs text-gray-500 mt-1">
        Criada por: {{ aventura.criador.username }}
      </p>

      <div class="mt-3 flex gap-2">
        <a href="{{ url_for('entrar_aventura', pk=aventura.id) }}"
           class="bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-black font-bold">
           🎮 Entrar
        </a>

        <a href="{{ url_for('editar_aventura', pk=aventura.id) }}"
           class="bg-yellow-500 hover:bg-yellow-600 px-3 py-1 rounded-lg text-black font-bold">
           ✏️ Editar
        </a>

        <form action="{{ url_for('excluir_aventura', pk=aventura.id) }}" method="post" onsubmit="return confirm('Tem certeza que deseja excluir esta aventura?');">
          <!-- CSRF token, se usar Flask-WTF -->
          {% if csrf_token %}
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          {% endif %}
          <button type="submit"
                  class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded-lg text-white font-bold">
            🗑️ Excluir
          </button>
        </form>
      </div>
    </div>
  {% else %}
    <p class="text-gray-400">Nenhuma aventura criada ainda.</p>
  {% endfor %}
</div>
{% endblock %}
