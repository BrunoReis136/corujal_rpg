{% extends "core/base.html" %}
{% load static %}

{% block title %}Dashboard - RPG{% endblock %}

{% block content %}
<!-- Narrativa -->
<h2 class="text-2xl font-bold text-yellow-300 mb-4">🎲 Narrativa do Mestre</h2>
<div class="bg-gray-700 p-4 rounded-xl shadow-inner h-[60vh] overflow-y-auto">
    {% if narrativa %}
        {% for linha in narrativa %}
            <p class="mb-2">{{ linha }}</p>
        {% endfor %}
    {% else %}
        <p>A aventura começará em breve. Use as ações na lateral para interagir com o mestre IA.</p>
    {% endif %}
</div>
{% endblock %}

{% block sidebar %}
<div class="flex flex-col h-full justify-between">
    <div>
        <h2 class="text-xl font-semibold text-yellow-300 mb-2">Suas Ações</h2>
        
        <!-- Form de ações -->
        <form method="post" action="{% url 'acao_jogador' %}">
            {% csrf_token %}
            <button type="submit" name="acao" value="atacar"
                class="w-full bg-yellow-500 text-black font-bold py-2 rounded-lg mb-2">Atacar ⚔️</button>
            <button type="submit" name="acao" value="conversar"
                class="w-full bg-green-500 text-black font-bold py-2 rounded-lg mb-2">Conversar 🗣️</button>
            <button type="submit" name="acao" value="investigar"
                class="w-full bg-blue-500 text-black font-bold py-2 rounded-lg mb-2">Investigar 🔍</button>

            <textarea name="comando" placeholder="Digite sua ação personalizada..."
                class="w-full mt-3 p-2 rounded-lg bg-gray-700 text-gray-200" rows="4"></textarea>
            <button type="submit"
                class="mt-2 w-full bg-yellow-400 text-black font-bold py-2 rounded-lg">Enviar</button>
        </form>
    </div>

    <!-- Informações do jogador -->
    <div class="text-sm text-gray-400 mt-4">
        <p>Turno: {{ turno }}</p>
        <p>Jogador: {{ request.user.username }}</p>
        <p>HP: {{ jogador.hp }} | MP: {{ jogador.mp }}</p>
    </div>
</div>
{% endblock %}
