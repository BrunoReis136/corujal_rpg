{% extends "base.html" %}

{% block title %}Bem-vindo ao RPG{% endblock %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  <div class="mb-4">
    {% for category, message in messages %}
      <p class="text-white {% if category=='danger' %}bg-red-600{% elif category=='success' %}bg-green-600{% else %}bg-gray-600{% endif %} p-2 rounded mb-1">{{ message }}</p>
    {% endfor %}
  </div>
  {% endif %}
{% endwith %}

<div class="flex flex-col items-center justify-center h-full">
  <h2 class="text-3xl font-bold text-yellow-300 mb-6">üé≤ Entre na Aventura</h2>
  
  <!-- Tabs -->
  <div class="bg-gray-800 p-6 rounded-xl shadow-lg w-full max-w-md">
    <div class="flex justify-around mb-4">
      <button type="button" onclick="showForm('login', this)" class="tab-btn text-yellow-400 font-semibold">Login</button>
      <button type="button" onclick="showForm('signup', this)" class="tab-btn text-gray-300 hover:text-yellow-400">Cadastro</button>
      <button type="button" onclick="showForm('forgot', this)" class="tab-btn text-gray-300 hover:text-yellow-400">Esqueci a senha</button>
    </div>

    <!-- Login Form -->
    <form id="login-form" method="post" action="{{ url_for('home') }}">
      {{ login_form.hidden_tag() }}
      <div class="mb-3">
        {{ login_form.username(class_="w-full p-2 rounded-lg bg-gray-700 text-gray-200", placeholder="Usu√°rio") }}
      </div>
      <div class="mb-3">
        {{ login_form.password(class_="w-full p-2 rounded-lg bg-gray-700 text-gray-200", placeholder="Senha") }}
      </div>
      <div>
        {{ login_form.submit(class_="w-full bg-yellow-400 text-black font-bold py-2 rounded-lg") }}
      </div>
    </form>

    <!-- Signup Form -->
    <form id="signup-form" class="form-block hidden" method="post" action="{{ url_for('home') }}">
      {{ signup_form.hidden_tag() }}
      <div class="mb-3">
        {{ signup_form.username(class_="w-full p-2 rounded-lg bg-gray-700 text-gray-200", placeholder="Usu√°rio") }}
      </div>
      <div class="mb-3">
        {{ signup_form.email(class_="w-full p-2 rounded-lg bg-gray-700 text-gray-200", placeholder="E-mail") }}
      </div>
      <div class="mb-3">
        {{ signup_form.password1(class_="w-full p-2 rounded-lg bg-gray-700 text-gray-200", placeholder="Senha") }}
      </div>
      <div class="mb-3">
        {{ signup_form.password2(class_="w-full p-2 rounded-lg bg-gray-700 text-gray-200", placeholder="Confirme a Senha") }}
      </div>
      <div>
        {{ signup_form.submit(class_="w-full bg-green-400 text-black font-bold py-2 rounded-lg") }}
      </div>
    </form>

    <!-- Forgot Password Form -->
    <form id="forgot-form" class="form-block hidden" method="post" action="{{ url_for('forgot_password') }}">
      {{ forgot_form.hidden_tag() }}
      <div class="mb-3">
        {{ forgot_form.email(class_="w-full p-2 rounded-lg bg-gray-700 text-gray-200", placeholder="Digite seu e-mail") }}
      </div>
      <div>
        {{ forgot_form.submit(class_="w-full bg-blue-400 text-black font-bold py-2 rounded-lg") }}
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block sidebar %}
<nav class="flex flex-col h-full gap-2 p-2 bg-gray-800 rounded-xl shadow-md">
  <a href="{{ url_for('home') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    üè† Home
  </a>
  <a href="{{ url_for('sobre') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    üìñ Sobre
  </a>
  <a href="{{ url_for('contato') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    ‚úâÔ∏è Contato
  </a>
  <a href="{{ url_for('servicos') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    ‚öôÔ∏è Servi√ßos
  </a>
</nav>
{% endblock %}

{% block scripts %}
<script>
  function showForm(formId, el) {
    document.querySelectorAll(".form-block").forEach(f => f.classList.add("hidden"));
    document.querySelectorAll(".tab-btn").forEach(btn => btn.classList.remove("text-yellow-400"));
    document.getElementById(formId + "-form").classList.remove("hidden");
    el.classList.add("text-yellow-400");
  }
</script>
{% endblock %}
