{% extends "base.html" %}

{% block title %}Bem-vindo ao RPG{% endblock %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  <div class="mb-4">
    {% for category, message in messages %}
      <p class="text-white {% if category=='error' %}bg-red-600{% elif category=='success' %}bg-green-600{% else %}bg-gray-600{% endif %} p-2 rounded mb-1">{{ message }}</p>
    {% endfor %}
  </div>
  {% endif %}
{% endwith %}

<div class="flex flex-col items-center justify-center h-full">
  <h2 class="text-3xl font-bold text-yellow-300 mb-6">🎲 Entre na Aventura</h2>
  
  <!-- Tabs -->
  <div class="bg-gray-800 p-6 rounded-xl shadow-lg w-full max-w-md">
    <div class="flex justify-around mb-4">
      <button onclick="showForm('login', this)" class="tab-btn text-yellow-400 font-semibold">Login</button>
      <button onclick="showForm('signup', this)" class="tab-btn text-gray-300 hover:text-yellow-400">Cadastro</button>
      <button onclick="showForm('forgot', this)" class="tab-btn text-gray-300 hover:text-yellow-400">Esqueci a senha</button>
    </div>

    <!-- Login Form -->
    <form id="login-form" class="form-block" method="post" action="{{ url_for('login') }}">
      <input type="text" name="username" placeholder="Usuário" required
        class="w-full mb-3 p-2 rounded-lg bg-gray-700 text-gray-200">
      <input type="password" name="password" placeholder="Senha" required
        class="w-full mb-3 p-2 rounded-lg bg-gray-700 text-gray-200">
      <button type="submit"
        class="w-full bg-yellow-400 text-black font-bold py-2 rounded-lg">Entrar</button>
    </form>

    <!-- Signup Form -->
    <form id="signup-form" class="form-block hidden" method="post" action="{{ url_for('signup') }}">
      <input type="text" name="username" placeholder="Usuário" required
        class="w-full mb-3 p-2 rounded-lg bg-gray-700 text-gray-200">
      <input type="email" name="email" placeholder="E-mail" required
        class="w-full mb-3 p-2 rounded-lg bg-gray-700 text-gray-200">
      <input type="password" name="password1" placeholder="Senha" required
        class="w-full mb-3 p-2 rounded-lg bg-gray-700 text-gray-200">
      <input type="password" name="password2" placeholder="Confirme a Senha" required
        class="w-full mb-3 p-2 rounded-lg bg-gray-700 text-gray-200">
      <button type="submit"
        class="w-full bg-green-400 text-black font-bold py-2 rounded-lg">Cadastrar</button>
    </form>

    <!-- Forgot Password Form -->
    <form id="forgot-form" class="form-block hidden" method="post" action="{{ url_for('forgot_password') }}">
      <input type="email" name="email" placeholder="Digite seu e-mail" required
        class="w-full mb-3 p-2 rounded-lg bg-gray-700 text-gray-200">
      <button type="submit"
        class="w-full bg-blue-400 text-black font-bold py-2 rounded-lg">Enviar link de recuperação</button>
    </form>
  </div>
</div>
{% endblock %}

{% block sidebar %}
<nav class="flex flex-col h-full gap-2 p-2 bg-gray-800 rounded-xl shadow-md">
  <a href="{{ url_for('home') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    🏠 Home
  </a>
  <a href="{{ url_for('sobre') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    📖 Sobre
  </a>
  <a href="{{ url_for('contato') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    ✉️ Contato
  </a>
  <a href="{{ url_for('servicos') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    ⚙️ Serviços
  </a>
</nav>
{% endblock %}

{% block scripts %}
<script>
  function showForm(formId, el) {
    document.querySelectorAll(".form-block").forEach(f => f.classList.add("hidden"));
    document.querySelectorAll(".tab-btn").forEach(btn => btn.classList.remove("text-yellow-400"));
    document.getElementById(formId + "-form").classList.remove("hidden");
    el.classList.add("text-yellow-400");
  }
</script>
{% endblock %}
