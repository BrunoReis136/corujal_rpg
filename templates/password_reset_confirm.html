{% extends "base.html" %}

{% block title %}🔒 Redefinir Senha - RPG{% endblock %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  <div class="mb-4">
    {% for category, message in messages %}
      <p class="text-white {% if category=='error' %}bg-red-600{% elif category=='success' %}bg-green-600{% else %}bg-gray-600{% endif %} p-2 rounded mb-1">{{ message }}</p>
    {% endfor %}
  </div>
  {% endif %}
{% endwith %}

<div class="flex flex-col items-center justify-center h-full">
  <h2 class="text-3xl font-bold text-yellow-300 mb-6">🔑 Definir nova senha</h2>

  <div class="bg-gray-800 p-6 rounded-xl shadow-lg w-full max-w-md">
    <form method="post" class="space-y-4">
      {% if csrf_token %}
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      {% endif %}

      <input type="password" name="new_password1" placeholder="Nova senha" required
             class="w-full mb-3 p-2 rounded-lg bg-gray-700 text-gray-200">
      <input type="password" name="new_password2" placeholder="Confirme a nova senha" required
             class="w-full mb-3 p-2 rounded-lg bg-gray-700 text-gray-200">

      <pre class="block font-semibold text-gray-200 mb-1">
A senha deve seguir este padrão:
- Mínimo de 6 caracteres.
- Não pode ser só números.
- Não pode ser muito comum.
- Não pode ser igual a dados pessoais.
      </pre>

      <button type="submit"
              class="w-full bg-yellow-400 text-black py-2 px-4 rounded-lg font-bold hover:bg-yellow-500 transition">
        ✅ Salvar nova senha
      </button>
    </form>

    <div class="mt-4 text-center">
      <a href="{{ url_for('home') }}" class="text-blue-400 hover:underline">Voltar ao login</a>
    </div>
  </div>
</div>
{% endblock %}

{% block sidebar %}
<nav class="flex flex-col h-full gap-2 p-2 bg-gray-800 rounded-xl shadow-md">
  <a href="{{ url_for('home') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    🏠 Home
  </a>
  <a href="{{ url_for('sobre') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    📖 Sobre
  </a>
  <a href="{{ url_for('contato') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    ✉️ Contato
  </a>
  <a href="{{ url_for('servicos') }}" class="flex-1 flex items-center justify-center px-4 py-2 rounded-lg border-2 border-gray-600 hover:border-yellow-400 bg-gray-700 text-gray-200 hover:bg-yellow-500 hover:text-black font-bold text-xl transition-all duration-300 transform hover:scale-105">
    ⚙️ Serviços
  </a>
</nav>
{% endblock %}
